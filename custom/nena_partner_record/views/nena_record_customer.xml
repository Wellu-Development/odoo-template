<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="nena_record_customer_view_list" model="ir.ui.view">
        <field name="name">nena.record.view.list</field>
        <field name="model">nena.record</field>
        <field name="arch" type="xml">
            <list string="Customer">
                <field name="name" />
                <field name="status_record_id" />
            </list>
        </field>
    </record>

    <record id="nena_record_customer_view_form" model="ir.ui.view">
        <field name="name">nena.record.form.cli</field>
        <field name="model">nena.record</field>
        <field name="arch" type="xml">
            <form string="Customer">
                <header>
                    <button name="action_approved" string="Approve" class="oe_highlight" type="object" invisible="show_approve_buttons != True" />  
                    <button name="action_refused" string="Decline" type="object" invisible="show_approve_buttons != True" />  
                    <field name="status_record_id" widget="statusbar" />
                </header>
                <sheet>
                    <group>
                        <h1><field name="name"/></h1>
                    </group>
                    <group colspan="2">
                        <group>       
                            <field name="partner_code" readonly="1" invisible="1"/>
                            <field name="nena_ref" style="width: 80px;"/>
                            <div class="o_td_label">
                                <label for="rif_type_id"/>
                            </div>
                            <div class="d-flex">
                                <field name="rif_type_id" placeholder="Prefix" style="width: 80px;"
                                        options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />
                                <span class="o_form_label mx-3 oe_edit_only text-center" style="width: 0ch; font-weight:bold;" >-</span>
                                <field name="rif_number" placeholder="Number" style="width: 120px;"/>
                            </div>
                            <div class="o_td_label">
                                <label for="status_id"/>
                            </div>
                            <div class="d-flex">
                                <field name="status_id" readonly="1" style="width: 150px;" 
                                        options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />
                                <span class="o_form_label mx-3 oe_edit_only text-right" style="width: 10ch; font-weight:bold;" >Causa</span>
                                <field name="cause_status_id" readonly="1" 
                                        options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />
                            </div>
                        </group>
                        <group>
                            <field name="zone_id" 
                                    options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />
                            <field name="region_id" readonly="1" force_save="1" />
                            <field name="district_id" readonly="1" force_save="1" />
                        </group>
                    </group>
                    <notebook>
                        <page string="General Information">
                            <group>
                                <field name="company_name"/>
                                <field name="headquarters" />
                                <field name="clasification_id" domain="[('category', '=', 'CLI')]" 
                                        options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}"/>
                            </group>
                            <group colspan="2">
                                <group>
                                    <separator string="TAX INFORMATION" colspan="2"/>
                                    <field name="address_fiscal"/>
                                    <field name="state_fiscal_id" options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />
                                    <field name="municipality_fiscal_id" domain="[('state_id', '=', state_fiscal_id)]"
                                            options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />
                                    <field name="city_fiscal_id" domain="[('municipality_id', '=', municipality_fiscal_id)]"
                                            options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />

                                    <separator string="DELIVERY DETAILS" colspan="2"/>
                                    <field name="address"/>
                                    <field name="state_id" options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />
                                    <field name="municipality_id" domain="[('state_id', '=', state_id)]" 
                                            options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />
                                    <field name="city_id" domain="[('municipality_id', '=', municipality_id)]" 
                                            options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />
                                </group>
                                <group>
                                    <separator string="CONTACT INFORMATION" colspan="2"/>
                                    <field name="email_main" widget="email" placeholder="correo@dominio.com"/>
                                    <field name="email_secondary" widget="email" placeholder="correo@dominio.com"/>
                                    <field name="main_phone" widget="phone" placeholder="Enter phone number (XXXXXXXXXXX)"/>
                                    <field name="main_mobile_phone" widget="phone" placeholder="Enter mobile phone number (XXXXXXXXXXX)"/>
                                </group>
                            </group>
                        </page>
                        <page string="Sales">
                            <group colspan="2">
                                <group>
                                    <field name="customer_category_id" 
                                            options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />
                                    <field name="additional_days"/>
                                    <field name="sales_commercial_discount"/>
                                    <field name="ufi_club" widget="boolean_toggle"/>
                                </group>
                                <group>
                                    <field name="condition_ids" widget="many2many_checkboxes" domain="[('category', '=', 'VTA')]" />
                                </group>
                            </group>
                        </page>
                        <page string="Collection">
                            <group colspan="2">
                                <group>
                                    <field name="payment_type_id" options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />
                                    <field name="days_inactive" />  
                                    <field name="chain_id" options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}" />                                               
                                    <field name="account_payment_term_id" string="Condicion de Pago" domain="[('postulation_type_id.code', '=', 'CLI')]"
                                        options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}"/>                                            
                                    <field name="customer_credit_limit" invisible="customer_credit_id == False"/>  
                                    <field name="customer_credit_balance" invisible="customer_credit_id == False"/>  
                                    <button name="action_open_credit_conditions" type="object" string="Create creditworthiness" 
                                            class="oe_highlight" invisible="customer_credit_id != False" />
                                </group>
                                <group>
                                    <field name="condition_ids" widget="many2many_checkboxes" domain="[('category', '=', 'COB')]" />
                                </group>
                            </group>
                        </page>
                        <page string="Regency">
                            <group name="container_row_2">
                                <group string="Regente" name="regent" priority="1">
                                    <field name="regent_id" context="{'default_is_opened_from_record_prv': False}"/>
                                    <field name="regent_id_number"/>
                                    <field name="regent_phone"/>
                                    <field name="regent_address"/>
                                    <div class="o_td_label">
                                        <label for="regent_matric_msds"/>
                                    </div>
                                    <div class="d-flex">
                                        <field name="regent_matric_msds" style="width: 120px;" />
                                        <span class="o_form_label mx-3 oe_edit_only text-right" style="width: 20ch; font-weight:bold;" >Desde Acta Func.</span>
                                        <field name="regent_oper_min_start_date" style="width: 120px;"/>
                                    </div>
                                    <div class="o_td_label">
                                        <label for="regent_colfar"/>
                                    </div>
                                    <div class="d-flex">
                                        <field name="regent_colfar" style="width: 120px;"/>
                                        <span class="o_form_label mx-3 oe_edit_only text-right" style="width: 20ch; font-weight:bold;" >Hasta Acta Func.</span>
                                        <field name="regent_oper_min_end_date" style="width: 120px;"/>
                                    </div>
                                    <field name="regent_inprefa_code" style="width: 120px;"/>
                                    <div class="o_td_label">
                                        <label for="regent_sicm_code"/>
                                    </div>
                                    <div class="d-flex">
                                        <field name="regent_sicm_code" style="width: 120px;" />
                                        <span class="o_form_label mx-3 oe_edit_only text-right" style="width: 20ch; font-weight:bold;" >Estatus S.I.C.M</span>
                                        <field name="regent_sicm_status" style="width: 120px;" domain="[('category', '=', 'SICM')]"
                                            options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}"/>
                                    </div>
                                    <div class="o_td_label">
                                        <label for="regent_sada_code"/>
                                    </div>
                                    <div class="d-flex">
                                        <field name="regent_sada_code" style="width: 120px;" />
                                        <span class="o_form_label mx-3 oe_edit_only text-right" style="width: 20ch; font-weight:bold;" >Estatus SADA</span>
                                        <field name="regent_sada_status" style="width: 120px;" domain="[('category', '=', 'SADA')]"
                                            options="{'no_quick_create':True,'no_create':True,'no_create_edit':True,'no_open': True}"/>
                                    </div>
                                </group>
                                <group string="Condiciones" name="condition" priority="2">
                                    <field name="condition_ids" widget="many2many_checkboxes" domain="[('category', '=', 'REG')]" />
                                </group>
                            </group>
                        </page>
                        <page string="Dispatch">
                            <group>
                                <field name="condition_ids" widget="many2many_checkboxes" domain="[('category', '=', 'ALM')]" />
                            </group>
                        </page>
                        <page string="Documents" name="digital_docs">
                            <field name="documents_customer_line_ids">
                                <list delete="1" create="1" decoration-danger="state == 'expired'">
                                    <field name="document_id"/>
                                    <field name="state" widget="badge" decoration-success="state in ('verified', 'valid')" decoration-danger="state == 'rejected'" decoration-info="state == 'to_verified'"/>
                                </list>
                                <form delete="1" duplicate="0" edite="1" create="1">
                                    <header>
                                        <!-- <button name="action_create_attachment" type="object" string="Attachement" icon="fa-paperclip" invisible="state not in ('draft', 'waiting','to_verified', 'expired', 'rejected')" class="oe_stat_button" groups="base.group_user"/> -->
                                        
                                        <field name="state" widget="statusbar" statusbar_visible="draft,waiting,to_verified,verified"/>
                                    </header>
                                    <sheet>
                                        <!-- <field name="is_active" invisible="1"/>
                                        <div class="alert alert-danger" role="alert" invisible="is_active">
                                            <strong>Warning:</strong> This document has expired.
                                        </div> -->
                                        <label for="document_id" string="Documento"/>
                                        <h1>
                                            <field name="document_id" readonly="0"/>
                                        </h1>
                                        <group>
                                            <group>
                                                <field name="regulatory_entity_id"/>
                                            </group>
                                            <group>
                                                <label for="end_date" invisible="not is_validity"/>
                                                <div class="o_row" invisible="not is_validity">
                                                    <field name="start_date"/> - <field name="end_date"/>
                                                </div>
                                                <field name="is_validity" invisible="1"/>
                                            </group>
                                            <field name="is_multiple_file" invisible="1"/>
                                            <!-- <div class="d-flex" invisible="is_multiple_file">
                                                <field name="attachment_filename" invisible="1"/>
                                                <label for="attachment_id" string="Attachment"/>
                                                <field name="attachment_id" readonly="1" force_save="1" filename="attachment_filename"/>
                                            </div> -->
                                            <!-- <div class="d-flex" invisible="not is_multiple_file">
                                                <label for="attachment_ids" string="Attachments"/>
                                                <field name="attachment_ids" readonly="1" widget="many2many_binary"/>
                                            </div> -->
                                        </group>
                                        <notebook>
                                            <page name="approvers" string="Approvers">
                                                <!-- <field name="approver_line_ids"/> -->
                                                <field name="approver_line_ids" readonly="0" force_save="1">
                                                    <list editable="bottom">
                                                        <field name="department_id" options="{'no_open': True, 'no_create': True}"/>
                                                        <field name="employee_ids" widget="many2many_tags" 
                                                                domain="[('department_id', '=', department_id),('job_id.is_approver_record', '=', True),('user_id', '!=', False)]" 
                                                                options="{'no_open': True, 'no_create': True}"/>
                                                        <field name="activity_type_id" string="Type activity" force_save="1" options="{'no_open': True, 'no_create': True}"/>
                                                        <field name="required"/>
                                                        <field name="sequence"/>
                                                    </list>
                                                </field>
                                            </page>
                                        </notebook>
                                    </sheet>
                                    <footer>
                                        <button name="action_verified" type="object" string="Verify" class="btn btn-primary" groups="base.group_user"/>
                                        <button name="action_refuse" type="object" string="Refuse" class="btn btn-secondary" groups="base.group_user"/>
                                        <button string="Cancel" class="btn-secondary" special="cancel"/>
                                    </footer>
                                </form>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="nena_record_customer_action" model="ir.actions.act_window">
        <field name="name">Customer</field>
        <field name="res_model">nena.record</field>
        <field name="domain">[('postulation_type_id.code', '=', 'CLI')]</field>
        <field name="view_mode">list,form</field>
        <field name="context">{'default_postulation_code': 'CLI'}</field>
        <field name="view_ids" eval="[(5, 0, 0),
        (0, 0, {'view_mode': 'list', 'view_id': ref('nena_record_customer_view_list')}),
        (0, 0, {'view_mode': 'form', 'view_id': ref('nena_record_customer_view_form')})
        ]"/>
    </record>

    <menuitem
        id="nena_record_customer_menu"
        name="Record"
        action="nena_record_customer_action"
        parent="nena_partner_record_customer_menu"
        sequence="5"/>
</odoo>